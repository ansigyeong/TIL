# [IT Essential]웹서버 프로그래밍시 주의할 점

날짜 : 2020.08.05

진행 :  한기철 컨설턴트



## '너'를 의심

- 사용자 인증(JWT)

- 서버 중심의 로직 처리

- 사용자 요청의 유효성 검증

  - 요청 검증 - 파일 업로드
    - 사례 : '.jsp' 파일 이용
      - 게시판 파일 업로드 기능 사용
      - '.jsp' 파일 업로드 허용
      - '.jsp' 파일 내에 특정 테이블 조회 기능 구현

- Sql injection, XSS 방어

  - Sql injection

    - 클라이언트의 입력 값은 DB query > where 조건문의 일부로 사용
    - select * from USERS where id = 'user1' and pw = 'pw1';
    - select * from USERS where id = '' or 1 = 1 -- ' and pw = 'pw1'; 보내서 정보 출력

  - XSS

    - Cross-Site Scripting

      - <script> 악의적인 해커의 url로 사용자 주요 정보 전송 </script>





##  '나'를 의심

- 1이 아닌 N개의 클라이언트의 요청
  - 부하 테스트 진행(JMeter or Postman)
- 적절한 응답 시간과 데이터 신뢰성
  - 부하 테스트 진행(JMeter or Postman)
  - 요청-응답 시간을 줄이기 위해 캐시 고려 (EHCACHE, Redis)
  - Multi-thread 환경에서의 concurrency
- 트랜잭션 처리 여부
- 서비스 및 컨텐츠 사용 권한
- 주요 데이터 암호화





## 발생한 일 기록

- 효율적인 logging 구축
  - 서버가 작동하면서 발생하는 주요 이슈들을 기록
  - 단순 콘솔 출력보다는 주요 logger(library)를 사용
  - 서버 운영 시 발생한 이슈 추적의 시작점

- 주요 액티비티 로깅
- 익셉션, 에러 로깅





## 서버 테스트 시나리오

- 복수개의 요청은 수행해봐야 함
- 눈에 보이지 않는 비 기능 요소에 대한 테스트 시나리오 작성
- 테스트 할 내용을 단다는 것 자체로 SW 역량 인증



## 클라이언트

- 클라이언트 의심의 중요성

- 서버의 능동적인 대처 필요



## HTTP

- Hyper Text Transfer Protocol
- Stateless
- HTTP 서버는 불특정 다수의 요청을 전제





## 퀴즈

- 프로그래머는 language를 사용해 궁극적으로 (      )에 저장되는 값을 제어해가며 원하는 기능을 만들어 나간다
  - 메모리
- 게임의 '치트 엔진'은 무엇이고 어떤 장치의 값을 편집할 까요?
  - 메모리 스캐너, 내가 원하는 메모리의 값을 바꾸기
- 클라이언트의 데이터 vs 서버가 알고 있는 데이터 뭐가 우선일까? 이유는?
  - 서버 데이터가 우선, 클라이언트 데이터는 메모리 조작이 쉽다
- Stateless 프로토콜의 단점은 무엇이며 이를 해결하기 위한 방법은?
  - 누가 요청하였는지 알 수 없다, 쿠키(클라이언트)와 세션(서버)을 이용

- 우리 팀만의 특별한 웹서버 WAS DB 구성 방법을 지금! 채팅창에 작성 해 주세요!



## 추가 서칭

### SQL Injection

- 응용 프로그램 보안 상의 허점을 의도적으로 이용해, 악의적인 SQL문을 실행되게 함으로써 데이터베이스를 비정상적으로 조작하는 code injection 공격 방법
- 방어
  - Prepared statement 사용 : 사용자의 입력이 쿼리문으로 부터 분리되기 때문에 SQL injection을 효과적으로 방어
  - escape : SQL에 특별한 의미를 갖는 문자들을 찾아서 SQL injection을 효과적으로 방어



### XSS

- 웹사이트 관리자가 아닌 이가 웹 페이지에 악성 스크립트를 삽입하는 방법

- 방어
  - 입력 값 제한 : 사용자의 입력 값을 제한하여 스크립트를 삽입하지 못하게 하는 방법
  - 입력 값 치환 : 태그 문자(<, >) 등 위험한 문자를 HTML 참조 문자로 인코딩하여 서버에서 브라우저로 전송하는 방법